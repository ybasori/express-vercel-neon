(()=>{"use strict";var __webpack_modules__={67:function(__unused_webpack_module,exports,__webpack_require__){var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},__assign.apply(this,arguments)},__awaiter=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,i)}l((r=r.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},__spreadArray=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var db_1=__importDefault(__webpack_require__(605)),pg_1=__importDefault(__webpack_require__(449)),uniqueness=function(e,t,n,r,o,a){return __awaiter(this,void 0,void 0,function(){var s,i;return __generator(this,function(l){switch(l.label){case 0:return s="",null!=o&&null!=a&&(s=s+" AND "+a+' != "'+o+'"'),(i=db_1.default[e])instanceof pg_1.default.Pool?[4,i.query("select * from "+t+" where "+n+'="'+r+'" '+s+" limit 1")]:[3,2];case 1:return[2,l.sent().rows];case 2:return[4,i.query("select * from "+t+" where "+n+'="'+r+'" '+s+" limit 1")];case 3:return[2,l.sent()[0]]}})})},Validator={make:function(body,rules){return __awaiter(this,void 0,void 0,function(){var error,err_msg,_loop_1,_a,_b,_c,_i,key,_d,_e;return __generator(this,function(_f){switch(_f.label){case 0:for(_c in error=0,err_msg={},_loop_1=function(key){var rule,label,noRule,_loop_2,_g,_h,_j,_k,keyRule;return __generator(this,function(_l){switch(_l.label){case 0:for(_j in rule=rules[key],label=null==rule.label||void 0===rule.label||""===rule.label?key:rule.label,noRule=0,_loop_2=function(keyRule){var uniqueRule,db,table,column,ignoreId,ignoreIdColumn,bodyKey,re,value2,key2,label2,re,new_message,new_message_1,setMessage,result,_m,_o;return __generator(this,function(_p){switch(_p.label){case 0:return"required"!==keyRule?[3,1]:rule.rule[keyRule]?(void 0!==body[key]&&null!=body[key]&&void 0!==body[key]&&""!==body[key]||(0===noRule&&(err_msg=__assign(__assign({},err_msg),(_m={},_m[key]=[],_m))),err_msg=__assign(__assign({},err_msg),(_o={},_o[key]=__spreadArray(__spreadArray([],err_msg[key],!0),["".concat(label," is required.")],!1),_o)),noRule++,error++),[3,12]):[2,"continue"];case 1:return"unique"!==keyRule?[3,5]:void 0===rule.rule[keyRule]?[3,3]:(uniqueRule=rule.rule[keyRule].split("."),db=uniqueRule[0],table=uniqueRule[1],column=uniqueRule[2],ignoreId=null,ignoreIdColumn="id",void 0!==uniqueRule[3]&&(ignoreId=uniqueRule[3]),void 0!==uniqueRule[4]&&(ignoreIdColumn=uniqueRule[4]),bodyKey=body[key],[4,uniqueness(db,table,column,bodyKey,ignoreId,ignoreIdColumn).then(function(e){e[0][0]&&(0===noRule&&(err_msg[key]=[]),err_msg[key].push("".concat(label," is already in use.")),noRule++,error++)})]);case 2:return _p.sent(),[3,4];case 3:return[2,"continue"];case 4:return[3,12];case 5:return"email"!==keyRule?[3,6]:(rule.rule[keyRule]&&(re=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,void 0===body[key]||re.test(body[key].toString().toLowerCase().trim())||(0===noRule&&(err_msg[key]=[]),err_msg[key].push("".concat(label," is invalid.")),noRule++,error++)),[3,12]);case 6:return"equalsTo"!==keyRule?[3,7]:(rule.rule[keyRule]&&(value2=body[rule.rule[keyRule]],key2=rule.rule[keyRule],label2=null==rules[key2].label||void 0===rules[key2].label||""===rules[key2].label?key2:rules[key2].label,body[key]!==value2&&(0===noRule&&(err_msg[key]=[]),err_msg[key].push("".concat(label," must be match to ").concat(label2,".")),noRule++,error++)),[3,12]);case 7:return"customWithRegex"!==keyRule?[3,8]:((null===(_d=rule.rule[keyRule])||void 0===_d?void 0:_d.regex)&&void 0!==(null===(_e=rule.rule[keyRule])||void 0===_e?void 0:_e.message)&&(re=eval("/"+rule.rule[keyRule].regex+"/i"),re.test(body[key].toString().trim())||(0===noRule&&(err_msg[key]=[]),new_message=rule.rule[keyRule].message.replace("%s",label),err_msg[key].push(new_message),noRule++,error++)),[3,12]);case 8:return"custom"!==keyRule?[3,11]:rule.rule[keyRule]?(new_message_1="",setMessage=function(e){return new_message_1=e,!1},[4,rule.rule[keyRule]({setMessage,value:body[key],label})]):[3,10];case 9:result=_p.sent(),result||(0===noRule&&(err_msg[key]=[]),err_msg[key].push(new_message_1),noRule++,error++),_p.label=10;case 10:return[3,12];case 11:if("number"!==keyRule)return[2,"continue"];rule.rule[keyRule]&&isNaN(body[key])&&(0===noRule&&(err_msg[key]=[]),err_msg[key].push("".concat(label," is not a number.")),noRule++,error++),_p.label=12;case 12:return[2]}})},_g=rule.rule,_h=[],_g)_h.push(_j);_k=0,_l.label=1;case 1:return _k<_h.length?(_j=_h[_k],_j in _g?(keyRule=_j,[5,_loop_2(keyRule)]):[3,3]):[3,4];case 2:_l.sent(),_l.label=3;case 3:return _k++,[3,1];case 4:return[2]}})},_a=rules,_b=[],_a)_b.push(_c);_i=0,_f.label=1;case 1:return _i<_b.length?(_c=_b[_i],_c in _a?(key=_c,[5,_loop_1(key)]):[3,3]):[3,4];case 2:_f.sent(),_f.label=3;case 3:return _i++,[3,1];case 4:return[2,{fails:function(){return error>0},getMessages:function(){return err_msg}}]}})})}};exports.default=Validator},88:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,i)}l((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},s=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(605)),u=i(n(449)),c=function(){function e(){this.dialect="mysql",this.relations=null}return e.prototype.filterQuery=function(e,t){var n=e.filter,r=e.table,o=e.dialect;if(n){t&&console.log(n);var a=Object.keys(n).filter(function(e){var t=e.split("_");return"join"!==t[0]&&"leftJoin"!==t[0]&&"rightJoin"!==t[0]}).filter(function(e){for(var t,r=n[e],o=!0,a=!1;!0===o;)"object"==typeof r?Array.isArray(r)?0===r.length?(a=!0,o=!1):o=!1:r=null!==(t=r.not)&&void 0!==t?t:r.in:o=!1;return!a}).map(function(e){var t=n[e],a=!1,s=!1;return(null==t?void 0:t.not)&&(a=!0,t=t.not),t.in&&(s=!0,t="(".concat(t.in.map(function(e){return"'".concat(e,"'")}).join(", "),")")),"null"===t?a?"".concat(r,".").concat(e," IS NOT NULL"):"".concat(r,".").concat(e," IS NULL"):s?a?"".concat(r,".").concat(e," NOT IN ").concat(t):"".concat(r,".").concat(e," IN ").concat(t):"mysql"===o?a?"".concat(r,".").concat(e," NOT LIKE '").concat(t,"'"):"".concat(r,".").concat(e," LIKE '").concat(t,"'"):"pgsql"===o?a?"".concat(r,".").concat(e,"::text NOT LIKE '").concat(t,"'"):"".concat(r,".").concat(e,"::text LIKE '").concat(t,"'"):""});return a}return[]},e.prototype.paginationQuery=function(e){if(e&&e.page&&e.page.of&&e.page.size){var t=(Number(e.page.of)-1)*Number(e.page.size);return"LIMIT ".concat(e.page.size," OFFSET ").concat(t)}return""},e.prototype.sortQuery=function(e){if(e&&e.sort){var t=e.sort.filter(function(e){return!(!e.by||!e.order)}).map(function(e){return"".concat(e.by," ").concat(e.order)});return t.length>0?"ORDER BY ".concat(t.join(", ")):""}return""},e.prototype.joinSqlQuery=function(e,t,n){for(var r,o="",a=0;a<e.length;a++){var s=e[a].name,i=e[a].joinType,l=i+"_"+s;t&&"belongsTo"===t[e[a].name].type&&(o=o+" "+("leftJoin"===i?"LEFT JOIN":"rightJoin"===i?"RIGHT JOIN":"JOIN")+" "+t[s].relatedTo.table+" AS "+l+" ON "+l+"."+t[s].relatedTo.localKey+" = "+n+"."+t[s].relatedTo.foreignKey),t&&"hasMany"===t[s].type&&(o=o+" "+("leftJoin"===i?"LEFT JOIN":"rightJoin"===i?"RIGHT JOIN":"JOIN")+" "+t[s].relatedTo.table+" AS "+l+" ON "+l+"."+t[s].relatedTo.foreignKey+" = "+n+"."+t[s].relatedTo.localKey),t&&"hasOne"===t[s].type&&(o=o+" "+("leftJoin"===i?"LEFT JOIN":"rightJoin"===i?"RIGHT JOIN":"JOIN")+" "+t[s].relatedTo.table+" AS "+l+" ON "+l+"."+t[s].relatedTo.foreignKey+" = "+n+"."+t[s].relatedTo.localKey),e[a].join&&(o=o+" "+this.joinSqlQuery(e[a].join,null!==(r=null==t?void 0:t[s].relatedTo.relations)&&void 0!==r?r:null,l))}return o},e.prototype.joinColumnSqlQuery=function(e,t){for(var n,r="",o=0;o<e.length;o++){var a=e[o].name,s=e[o].joinType,i=s+"_"+a;if(t&&t[a].relatedTo.columns)for(var l=0;l<t[a].relatedTo.columns.length;l++)1===t[a].relatedTo.columns[l].length&&(r=r+i+"."+t[a].relatedTo.columns[l][0]+" AS "+s+"_"+a+"_"+t[a].relatedTo.columns[l][0]+(o!==e.length-1||l!==t[a].relatedTo.columns.length-1?", ":"")),2===t[a].relatedTo.columns[l].length&&(r=r+i+"."+t[a].relatedTo.columns[l][0]+" AS "+s+"_"+a+"_"+t[a].relatedTo.columns[l][1]+(o!==e.length-1||l!==t[a].relatedTo.columns.length-1?", ":""));e[o].join&&(r+=this.joinColumnSqlQuery(e[o].join,null!==(n=null==t?void 0:t[a].relatedTo.relations)&&void 0!==n?n:null))}return""!==r?", "+r:""},e.prototype.joinFilterSqlQuery=function(e){for(var t,n=e.joinArr,r=e.relationObj,o=e.dialect,a=[],i=0;i<n.length;i++){var l=n[i].name,u=n[i].joinType+"_"+l;r&&(a=s(s([],a,!0),this.filterQuery({filter:null!==(t=n[i].filter)&&void 0!==t?t:[],table:u,dialect:o}),!0))}return a},e.prototype.getByFilter=function(e,t){var n=this,i=e.db,u=e.dialect,c=e.table,d=e.filter,f=e.pagination,p=e.join,y=void 0===p?[]:p,_=e.relations,h=void 0===_?null:_,g=e.show,b=void 0===g?[]:g;return new Promise(function(e,p){return o(n,void 0,void 0,function(){var n,o,_,g,m,v,w,j,T,k,O,C,S,q,E,R,x,K,I,P,A,M,J,F,D,B,N,L=this;return a(this,function(Q){switch(Q.label){case 0:return Q.trys.push([0,10,,11]),n=i||(this.database?this.database:""),o=l.default[n],_=this.filterQuery({filter:r({},d),table:c||(null!==(B=this.table)&&void 0!==B?B:""),dialect:u||(this.dialect?this.dialect:"mysql")}),g=this.sortQuery(f),m=this.paginationQuery(f),v=Object.entries(d).filter(function(e){var t=e[0];return t.startsWith("join_")||t.startsWith("leftJoin_")||t.startsWith("rightJoin_")}).map(function(e){var t,n=e[0],r=e[1];return{name:n.replace(/^(leftJoin_|rightJoin_|join_)/,"").split("_")[0],joinType:n.split("_")[0],filter:(t={},t[n.replace(/^(leftJoin_|rightJoin_|join_)/,"").split("_")[1]]=r,t)}}),w=y.filter(function(e){return"string"!=typeof e&&("rightJoin"===e.joinType||"leftJoin"===e.joinType||"join"===e.joinType)}),j=s(s([],w,!0),v,!0).map(function(e,t,n){var o=n.filter(function(t){return t.name===e.name&&t.joinType===e.joinType}),a=r({},e);return o.forEach(function(e){a=r(r({},a),{filter:r(r({},a.filter),e.filter)})}),a}).filter(function(e,t,n){return n.findIndex(function(t){return t.name===e.name&&t.joinType===e.joinType})===t}),T=this.joinSqlQuery(w,h||this.relations,c||(null!==(N=this.table)&&void 0!==N?N:"")),k=this.joinColumnSqlQuery(w,h||this.relations),O=this.joinFilterSqlQuery({joinArr:j,relationObj:h||this.relations,dialect:u||(this.dialect?this.dialect:"mysql")}),C="SELECT ".concat(c||this.table,".* ").concat(k," FROM ").concat(c||this.table," ").concat(T," ").concat(s(s([],_,!0),O,!0).length>0?"WHERE":""," ").concat(s(s([],_,!0),O,!0).join(" AND ")," ").concat(g," ").concat(m),S=(new Date).toISOString(),console.log("[".concat(S,"][38;2;255;165;0m[SQL][0m ").concat(C)),console.log(""),q=void 0,"mysql"!==(u||(this.dialect?this.dialect:"mysql"))?[3,2]:[4,o.query(C)];case 1:q=Q.sent()[0],Q.label=2;case 2:return"pgsql"!==(u||(this.dialect?this.dialect:"mysql"))?[3,4]:[4,o.query(C)];case 3:E=Q.sent(),q=E.rows,Q.label=4;case 4:return R=s([],q,!0),y&&R.length>0?(x=h||this.relations,[4,Promise.all(y.map(function(e){var t,n,o,a="",s=[],i={};return"string"==typeof e?a=e:(a=e.name,s=e.join,i=null!==(o=e.filter)&&void 0!==o?o:{}),("string"!=typeof e&&["rightJoin","leftJoin","join"].indexOf(e.joinType)<0||"string"==typeof e)&&x&&"hasOne"===x[a].type?L.getByFilter({db:x[a].relatedTo.database,table:x[a].relatedTo.table,filter:r(r({},i),(t={},t[x[a].relatedTo.foreignKey]={in:R.filter(function(e){return!!e[x[a].relatedTo.localKey]}).filter(function(e,t,n){return n.findIndex(function(t){return e===t})===t}).map(function(e){return e[x[a].relatedTo.localKey]}).filter(function(e,t,n){return n.findIndex(function(t){return e===t})===t})},t)),join:s,relations:x[a].relatedTo.relations?x[a].relatedTo.relations:null}):("string"!=typeof e&&["rightJoin","leftJoin","join"].indexOf(e.joinType)<0||"string"==typeof e)&&x&&"belongsTo"===x[a].type?L.getByFilter({db:x[a].relatedTo.database,table:x[a].relatedTo.table,filter:r(r({},i),(n={},n[x[a].relatedTo.localKey]={in:R.filter(function(e){return!!e[x[a].relatedTo.foreignKey]}).map(function(e){return e[x[a].relatedTo.foreignKey]}).filter(function(e,t,n){return n.findIndex(function(t){return e===t})===t})},n)),join:s,relations:x[a].relatedTo.relations?x[a].relatedTo.relations:null}):new Promise(function(e){return e([])})}))]):[3,9];case 5:K=Q.sent(),R=s([],R.map(function(e){var t=r({},e);return y.forEach(function(n,o){var a,i,l,u;if(u="string"==typeof n?n:n.name,x&&"hasOne"===x[u].type){var c=s([],K[o].filter(function(t){return t[x[u].relatedTo.foreignKey]===e[x[u].relatedTo.localKey]}),!0)[0];t=r(r({},t),((a={})[u]=c,a))}x&&"belongsTo"===x[u].type&&(c=s([],(null!==(l=K[o])&&void 0!==l?l:[]).filter(function(t){return t[x[u].relatedTo.localKey]===e[x[u].relatedTo.foreignKey]}),!0)[0],t=r(r({},t),((i={})[u]=c,i)))}),t}),!0),I=function(e){var t,n,o;return a(this,function(a){switch(a.label){case 0:return t=R[e],[4,Promise.all(s([],y.map(function(e){var n,o,a,s="",i={},l=void 0,u=[];return"string"==typeof e?s=e:(s=e.name,i=null!==(o=e.filter)&&void 0!==o?o:{},l=null!==(a=e.pagination)&&void 0!==a?a:{},u=e.join),x&&"hasMany"===x[s].type?L.getByFilter({db:x[s].relatedTo.database,table:x[s].relatedTo.table,filter:r((n={},n[x[s].relatedTo.foreignKey]=t[x[s].relatedTo.localKey],n),i),join:u,relations:x[s].relatedTo.relations?x[s].relatedTo.relations:null,pagination:l}):new Promise(function(e){return e([])})}),!0))];case 1:return n=a.sent(),[4,Promise.all(s([],y.map(function(e){var n,o,a="",s={};return"string"==typeof e?a=e:(a=e.name,s=null!==(o=e.filter)&&void 0!==o?o:{}),x&&"hasMany"===x[a].type?L.countByFilter({db:x[a].relatedTo.database,table:x[a].relatedTo.table,dialect:x[a].relatedTo.dialect,filter:r((n={},n[x[a].relatedTo.foreignKey]=t[x[a].relatedTo.localKey],n),s)}):new Promise(function(e){return e([])})}),!0))];case 2:return o=a.sent(),y.forEach(function(a,s){var i="string"==typeof a?a:a.name;if(x&&"hasMany"===x[i].type){var l=n[s],u=o[s];R[e][i]=r(r({},t[i]),{data:l,total:u})}}),[2]}})},P=0,Q.label=6;case 6:return P<R.length?[5,I(P)]:[3,9];case 7:Q.sent(),Q.label=8;case 8:return P++,[3,6];case 9:return s([],R,!0),M=function(e,t,n,r){return e&&Object.keys(e).forEach(function(o){t.length>0&&!t.includes(o)&&!n.includes(o)?delete e[o]:"object"==typeof e&&J(e,o,r)}),e},J=function(e,t,n){var r,o,a,s=n.filter(function(e){return"string"!=typeof e}).find(function(e){return e.name===t});if(s){var i=null!==(r=s.show)&&void 0!==r?r:[],l=(null!==(o=s.join)&&void 0!==o?o:[]).map(function(e){return"string"!=typeof e?e.name:e});Array.isArray(e[t])?e[t]=e[t].map(function(e){var t;return M(e,i,l,null!==(t=s.join)&&void 0!==t?t:[])}):e[t]=M(e[t],i,l,null!==(a=s.join)&&void 0!==a?a:[])}return e},F=y.map(function(e){return"string"!=typeof e?e.name:e}),t&&console.log("==========",t,R),A=R.map(function(e){return Object.keys(e).forEach(function(t){b.length>0&&!b.includes(t)&&!F.includes(t)?delete e[t]:"object"==typeof e&&(e=J(e,t,y))}),e}),e(A),[3,11];case 10:return(D=Q.sent()).sqlMessage?p(D.sqlMessage):p(D),[3,11];case 11:return[2]}})})})},e.prototype.countByFilter=function(e,t){var n,i,c,d=this,f=e.filter,p=e.join,y=void 0===p?[]:p,_=e.db,h=e.dialect,g=e.table,b=_||(this.database?this.database:""),m=l.default[b],v=this.filterQuery({filter:r({},f),table:g||(null!==(n=this.table)&&void 0!==n?n:""),dialect:h||(this.dialect?this.dialect:"mysql")},!!t);t&&console.log("=======",v);var w=Object.entries(f).filter(function(e){var t=e[0];return t.startsWith("join_")||t.startsWith("leftJoin_")||t.startsWith("rightJoin_")}).map(function(e){var t,n=e[0],r=e[1];return{name:n.replace(/^(leftJoin_|rightJoin_|join_)/,"").split("_")[0],joinType:n.split("_")[0],filter:(t={},t[n.replace(/^(leftJoin_|rightJoin_|join_)/,"").split("_")[1]]=r,t)}}),j=y.filter(function(e){return"string"!=typeof e&&("rightJoin"===e.joinType||"leftJoin"===e.joinType||"join"===e.joinType)}),T=s(s([],j,!0),w,!0).map(function(e,t,n){var o=n.filter(function(t){return t.name===e.name&&t.joinType===e.joinType}),a=r({},e);return o.forEach(function(e){a=r(r({},a),{filter:r(r({},a.filter),e.filter)})}),a}).filter(function(e,t,n){return n.findIndex(function(t){return t.name===e.name&&t.joinType===e.joinType})===t}),k=this.joinSqlQuery(j,this.relations,g||(null!==(i=this.table)&&void 0!==i?i:"")),O=this.joinFilterSqlQuery({joinArr:T,relationObj:this.relations,dialect:h||(this.dialect?this.dialect:"mysql")}),C="SELECT COUNT(*) AS total FROM ".concat(g||(null!==(c=this.table)&&void 0!==c?c:"")," ").concat(k," ").concat(s(s([],v,!0),O,!0).length>0?"WHERE":""," ").concat(s(s([],v,!0),O,!0).join(" AND ")),S=(new Date).toISOString();return console.log("[".concat(S,"][38;2;255;165;0m[SQL][0m ").concat(C)),console.log(""),new Promise(function(e,t){return o(d,void 0,void 0,function(){var n,r;return a(this,function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),m instanceof u.default.Pool?[4,m.query(C)]:[3,2];case 1:return(n=o.sent()).rows&&n.rows.length>0&&e(n.rows[0].total),[3,4];case 2:return[4,m.query(C)];case 3:(n=o.sent())&&n.length>0&&e(n[0].total),o.label=4;case 4:return[3,6];case 5:return r=o.sent(),t(r),[3,6];case 6:return[2]}})})})},e.prototype.store=function(e){var t,n=null!==(t=this.database)&&void 0!==t?t:"",r=l.default[n],o=s(s([],Object.keys(e),!0),["created_at","updated_at"],!1).join(","),a=s(s([],Object.keys(e).map(function(t){return"'".concat(e[t],"'")}),!0),["'".concat((new Date).toISOString().replace("T"," ").replace("Z","").slice(0,19),"'"),"'".concat((new Date).toISOString().replace("T"," ").replace("Z","").slice(0,19),"'")],!1).join(","),i="INSERT INTO ".concat(this.table," (").concat(o,") VALUES (").concat(a,")"),c=(new Date).toISOString();return console.log("[".concat(c,"][38;2;255;165;0m[SQL][0m ").concat(i)),console.log(""),u.default.Pool,r.query(i)},e.prototype.update=function(e,t){var n,r,o,a=this,i=t.filter,c=t.join,d=void 0===c?[]:c,f=t.table,p=t.relations,y=void 0===p?null:p,_=t.dialect,h=null!==(n=this.database)&&void 0!==n?n:"",g=l.default[h],b=d.filter(function(e){return"string"!=typeof e&&("rightJoin"===e.joinType||"leftJoin"===e.joinType||"join"===e.joinType)}),m=this.joinSqlQuery(b,y||this.relations,f||(null!==(r=this.table)&&void 0!==r?r:"")),v="";"mysql"===(_||(this.dialect?this.dialect:"mysql"))&&(v=s(s([],Object.keys(e).map(function(t){var n,r;return null===e[t]?"".concat(f||(null!==(n=a.table)&&void 0!==n?n:""),".").concat(t,"= NULL "):"".concat(f||(null!==(r=a.table)&&void 0!==r?r:""),".").concat(t,"='").concat(e[t],"'")}),!0),["".concat(f||(null!==(o=this.table)&&void 0!==o?o:""),".updated_at = '").concat((new Date).toISOString().replace("T"," ").replace("Z","").slice(0,19),"'")],!1).join(" , ")),"pgsql"===(_||(this.dialect?this.dialect:"mysql"))&&(v=s(s([],Object.keys(e).map(function(t){return null===e[t]?"".concat(t,"= NULL "):"".concat(t,"='").concat(e[t],"'")}),!0),["updated_at = '".concat((new Date).toISOString().replace("T"," ").replace("Z","").slice(0,19),"'")],!1).join(" , "));var w=s([],Object.keys(i).map(function(e){return"".concat(e,"='").concat(i[e],"'")}),!0).join(" AND "),j="UPDATE ".concat(this.table," ").concat(m," SET ").concat(v," WHERE ").concat(w),T=(new Date).toISOString();return console.log("[".concat(T,"][38;2;255;165;0m[SQL][0m ").concat(j)),console.log(""),u.default.Pool,g.query(j)},e.prototype.delete=function(e){var t,n=null!==(t=this.database)&&void 0!==t?t:"",r=l.default[n],o=s([],Object.keys(e).map(function(t){return"".concat(t,"='").concat(e[t],"'")}),!0).join(" AND "),a="DELETE FROM ".concat(this.table," WHERE ").concat(o),i=(new Date).toISOString();return console.log("[".concat(i,"][38;2;255;165;0m[SQL][0m ").concat(a)),console.log(""),u.default.Pool,r.query(a)},e}();t.default=c},124:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.database="webivert_app",t.dialect="pgsql",t.table="blog_content_tags",t.relations={content:{type:"belongsTo",relatedTo:{database:"webivert_app",dialect:"pgsql",table:"blog_contents",foreignKey:"blog_content_id",localKey:"id"}},tag:{type:"belongsTo",relatedTo:{database:"webivert_app",dialect:"pgsql",table:"blog_tags",foreignKey:"blog_tag_id",localKey:"id"}}},t}return o(t,e),t}(a(n(88)).default);t.default=s},193:function(e,t){var n=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.promisify=t.renderHtml=t.expandRouter=void 0,t.convertToObj=function(e){function t(e){for(var t,n=[],r=/([^\[\]]+)/g;t=r.exec(e);){var o=t[1];n.push(/^\d+$/.test(o)?Number(o):o)}return n}function n(e,t,n){for(var r=e,o=0;o<t.length;o++){var a=t[o];if(o===t.length-1){var s=Number(n);r[a]=isNaN(s)||""===n.trim()?n:s}else void 0===r[a]&&(r[a]="number"==typeof t[o+1]?[]:{}),r=r[a]}}for(var r={},o=0,a=Object.entries(e);o<a.length;o++){var s=a[o],i=s[0],l=s[1];n(r,t(i),l)}return r};var r=function(e,t,o,a){var s=n([],o,!0);return t.forEach(function(t){t.controller&&(s=n(n([],s,!0),[{path:"".concat("/"!==e?e:"").concat(t.path),method:t.method,middleware:t.middleware?n(n([],a,!0),t.middleware,!0):n([],a,!0),controller:t.controller}],!1)),(Array.isArray(t.children)||"object"==typeof t.children)&&(s=r("".concat("/"!==e?e:"").concat(t.path),t.children,s,t.middleware?n(n([],a,!0),t.middleware,!0):n([],a,!0)))}),s};t.expandRouter=function(e){var t=[];return e.forEach(function(e){e.controller&&(t=n(n([],t,!0),[{path:e.path,method:e.method,middleware:e.middleware,controller:e.controller}],!1)),(Array.isArray(e.children)||"object"==typeof e.children)&&(t=r(e.path,e.children,t,e.middleware?n([],e.middleware,!0):[]))}),t},t.renderHtml=function(e){var t,n,r=null!==(t=null==e?void 0:e.title)&&void 0!==t?t:"Document",o=null!==(n=null==e?void 0:e.reducer)&&void 0!==n?n:"{}";return'<!DOCTYPE html>\n    <html lang="en">\n      <head>\n        <meta charset="UTF-8" />\n        <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n        <title>'.concat(r,'</title>\n    <link rel="stylesheet" href="/bulma/bulma.min.css">\n    <link rel="stylesheet" href="/fa/css/all.min.css">\n      </head>\n      <body>\n        <div id="root"></div>\n        \x3c!---<div id="fb-root"></div>\n<script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v23.0&appId=1282849900174718"><\/script> --\x3e\n        <script>\n      window.__PRELOADED_STATE__ = ').concat("{}"===o?o:JSON.stringify(o),';\n        <\/script>\n        <script src="/assets/js/app.bundle.js"><\/script>\n        <script src="/assets/js/runtime.bundle.js"><\/script>\n      </body>\n    </html>')},t.promisify=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new Promise(function(r,o){e.apply(void 0,n(n([],t,!1),[function(e,t){if(e)return o(e);r(t)}],!1))})}}},252:e=>{e.exports=require("express")},298:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,i)}l((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n(67)),i=a(n(336)),l=a(n(829)),u=a(n(486)),c={login:function(e,t){return r(void 0,void 0,void 0,function(){var n,r,a,c,d,f,p;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,4,,5]),n={username:{label:"Username",rule:{required:!0}},password:{label:"Password",rule:{required:!0}}},[4,s.default.make(e.body,n)];case 1:return(r=o.sent()).fails()?[2,t.status(400).json({statusCode:400,message:"Bad request!",error:r.getMessages()})]:[4,(new i.default).getByFilter({filter:{username:e.body.username,deleted_at:"null"}})];case 2:return!(a=o.sent())||a.length<1?[2,t.status(400).json({statusCode:400,message:"Username or Password not matched!"})]:(c=a[0],[4,u.default.compare(e.body.password,c.password)]);case 3:return o.sent()?(delete c.password,d=l.default.sign(c,null!==(p=process.env.SECRET_KEY)&&void 0!==p?p:"",{expiresIn:"1h"}),t.cookie("token",d,{httpOnly:!0,secure:!0,sameSite:"lax",maxAge:36e5}),[2,t.json({statusCode:200,message:"Welcome!",result:{name:c.name,username:c.username,joined_at:c.created_at}})]):[2,t.status(400).json({statusCode:400,message:"Username or Password not matched!"})];case 4:return f=o.sent(),console.log(f),[2,t.status(500).json({statusCode:500,message:f})];case 5:return[2]}})})},logout:function(e,t){t.clearCookie("token"),t.json({success:!0})}};t.default=c},336:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.database="webivert_app",t.dialect="pgsql",t.table="users",t}return o(t,e),t}(a(n(88)).default);t.default=s},388:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,i)}l((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},s=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=n(193),u=i(n(67)),c=i(n(535)),d=i(n(674)),f=i(n(510)),p=i(n(124)),y=i(n(799)),_=i(n(829)),h=n(903),g={listComment:function(e,t){return o(void 0,void 0,void 0,function(){var n,o,i,u,c,f,p,y;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),n={},o={},i=[],(u=(0,l.convertToObj)(e.query)).page&&(o=r(r({},o),{page:u.page})),u.sort&&(o=r(r({},o),{sort:u.sort})),u.filter&&(n=r(r({},n),u.filter)),u.show&&(i=s(s([],i,!0),u.show,!0)),[4,(c=new d.default).getByFilter({filter:r({deleted_at:"null"},n),pagination:o,join:[{name:"content",joinType:"leftJoin",show:["uid","title"],join:[{name:"author",joinType:"leftJoin",show:["uid","name"]}]}],show:i})];case 1:return f=a.sent(),[4,c.countByFilter({filter:r({deleted_at:"null"},n),join:[{name:"content",joinType:"leftJoin",show:["uid"]}]})];case 2:return p=a.sent(),[2,t.status(200).json({statusCode:200,message:"Success!",result:{data:f,total:p}})];case 3:return y=a.sent(),console.log(y),[2,t.status(500).json({statusCode:500,message:y.message})];case 4:return[2]}})})},deleteComment:function(e,t){return o(void 0,void 0,void 0,function(){var n,r,o,s;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),n=e.cookies.token,[4,(0,l.promisify)(_.default.verify)(n,null!==(s=process.env.SECRET_KEY)&&void 0!==s?s:"")];case 1:return r=a.sent(),[4,(new d.default).update({deleted_at:(new Date).toISOString().replace("T"," ").replace("Z","").slice(0,19)},{join:[{name:"content",joinType:"leftJoin",join:[{name:"author",joinType:"leftJoin"}]}],filter:{"blog_comments.uid":e.params.uid,"leftJoin_author.id":r.id}})];case 2:return a.sent(),[2,t.status(200).json({statusCode:200,message:"Success!"})];case 3:return o=a.sent(),[2,t.status(500).json({statusCode:500,message:o})];case 4:return[2]}})})},listCommentPublic:function(e,t){return o(void 0,void 0,void 0,function(){var n,o,i,u,c,f,p,y;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),n={},o={},i=[],(u=(0,l.convertToObj)(e.query)).page&&(o=r(r({},o),{page:u.page})),u.sort&&(o=r(r({},o),{sort:u.sort})),u.filter&&(n=r(r({},n),u.filter)),u.show&&(i=s(s([],i,!0),u.show,!0)),[4,(c=new d.default).getByFilter({filter:r({deleted_at:"null"},n),pagination:o,join:[{name:"content",joinType:"leftJoin",show:["uid"]}],show:i})];case 1:return f=a.sent(),[4,c.countByFilter({filter:r({deleted_at:"null"},n),join:[{name:"content",joinType:"leftJoin",show:["uid"]}]})];case 2:return p=a.sent(),[2,t.status(200).json({statusCode:200,message:"Success!",result:{data:f,total:p}})];case 3:return y=a.sent(),console.log(y),[2,t.status(500).json({statusCode:500,message:y.message})];case 4:return[2]}})})},storeCommentPublic:function(e,t){return o(void 0,void 0,void 0,function(){var n,o,s,i,c,p,y,g,b,m,v;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,9,,10]),n=(0,h.v4)(),o={name:{label:"Name",rule:{required:!0}},email:{label:"E-mail",rule:{required:!0}},comment:{label:"Comment",rule:{required:!0}},content_uid:{label:"Content",rule:{required:!0}}},[4,u.default.make(e.body,o)];case 1:return(s=a.sent()).fails()?[2,t.status(400).json({statusCode:400,message:"Bad request!",error:s.getMessages()})]:(i={},e.cookies.token?[4,(0,l.promisify)(_.default.verify)(e.cookies.token,null!==(v=process.env.SECRET_KEY)&&void 0!==v?v:"")]:[3,3]);case 2:c=a.sent(),i=r(r({},i),{created_by_user_id:c.id}),a.label=3;case 3:return e.body.comment_id?[4,(new d.default).getByFilter({filter:{uid:e.body.comment_uid}})]:[3,5];case 4:p=a.sent()[0],i=r(r({},i),{blog_comment_id:p.id}),a.label=5;case 5:return[4,(new f.default).getByFilter({filter:{uid:e.body.content_uid}})];case 6:return y=a.sent()[0],[4,(g=new d.default).store(r({uid:n,name:e.body.name,email:e.body.email,comment:e.body.comment,blog_content_id:y.id},i))];case 7:return a.sent(),[4,g.getByFilter({filter:{uid:n}})];case 8:return b=a.sent()[0],[2,t.status(200).json({statusCode:200,message:"Success!",result:b})];case 9:return m=a.sent(),console.log(m),[2,t.status(500).json({statusCode:500,message:m.message})];case 10:return[2]}})})},listContentPublic:function(e,t){return o(void 0,void 0,void 0,function(){var n,o,i,u,c,d,p,y;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),n={},o={},i=[],(u=(0,l.convertToObj)(e.query)).page&&(o=r(r({},o),{page:u.page})),u.sort&&(o=r(r({},o),{sort:u.sort})),u.filter&&(n=r(r({},n),u.filter)),u.show&&(i=s(s([],i,!0),u.show,!0)),[4,(c=new f.default).getByFilter({filter:r({deleted_at:"null"},n),pagination:o,join:[{name:"content_tag",join:["tag"]},{name:"category",show:["name"],joinType:"leftJoin"},{name:"created_by",show:["name"]}],show:i})];case 1:return d=a.sent(),[4,c.countByFilter({filter:r({deleted_at:"null"},n),join:[{name:"content_tag",join:["tag"]},{name:"category",show:["name"],joinType:"leftJoin"},{name:"created_by",show:["name"]}]})];case 2:return p=a.sent(),[2,t.status(200).json({statusCode:200,message:"Success!",result:{data:d,total:p}})];case 3:return y=a.sent(),console.log(y),[2,t.status(500).json({statusCode:500,message:y.message})];case 4:return[2]}})})},listCategoryPublic:function(e,t){return o(void 0,void 0,void 0,function(){var n,o,i,u,d,f,p,y;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),n={},o={},i=[],(u=(0,l.convertToObj)(e.query)).page&&(o=r(r({},o),{page:u.page})),u.sort&&(o=r(r({},o),{sort:u.sort})),u.filter&&(n=r(r({},n),u.filter)),u.show&&(i=s(s([],i,!0),u.show,!0)),[4,(d=new c.default).getByFilter({filter:r({deleted_at:"null"},n),pagination:o,join:[{name:"content",pagination:{page:{of:1,size:1}}}],show:i})];case 1:return f=a.sent(),[4,d.countByFilter({filter:r({deleted_at:"null"},n)})];case 2:return p=a.sent(),[2,t.status(200).json({statusCode:200,message:"Success!",result:{data:f,total:p}})];case 3:return y=a.sent(),console.log(y),[2,t.status(500).json({statusCode:500,message:y.message})];case 4:return[2]}})})},listContent:function(e,t){return o(void 0,void 0,void 0,function(){var n,o,i,u,c,d,p,y,h,g,b;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),n=e.cookies.token,[4,(0,l.promisify)(_.default.verify)(n,null!==(b=process.env.SECRET_KEY)&&void 0!==b?b:"")];case 1:return o=a.sent(),i={},u={},c=[],(d=(0,l.convertToObj)(e.query)).page&&(u=r(r({},u),{page:d.page})),d.sort&&(u=r(r({},u),{sort:d.sort})),d.filter&&(i=r(r({},i),d.filter)),d.show&&(c=s(s([],c,!0),d.show,!0)),[4,(p=new f.default).getByFilter({filter:r({created_by_user_id:o.id,deleted_at:"null"},i),pagination:u,join:[{name:"content_tag",join:["tag"]},{name:"category",joinType:"leftJoin",show:["name"]},{name:"category",show:["name"]},{name:"created_by",show:["name"]}],show:c},"iniiiii")];case 2:return y=a.sent(),[4,p.countByFilter({filter:r({created_by_user_id:o.id,deleted_at:"null"},i)})];case 3:return h=a.sent(),[2,t.status(200).json({statusCode:200,message:"Success!",result:{data:y,total:h}})];case 4:return g=a.sent(),console.log(g),[2,t.status(500).json({statusCode:500,message:g.message})];case 5:return[2]}})})},createContent:function(e,t){return o(void 0,void 0,void 0,function(){var n,o,s,i,d,g,b,m,v,w,j,T,k;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,9,,10]),n=e.cookies.token,[4,(0,l.promisify)(_.default.verify)(n,null!==(k=process.env.SECRET_KEY)&&void 0!==k?k:"")];case 1:return o=a.sent(),s=(0,h.v4)(),i={title:{label:"Title",rule:{required:!0}},content:{label:"Content",rule:{required:!0}}},[4,u.default.make(e.body,i)];case 2:return(d=a.sent()).fails()?[2,t.status(400).json({statusCode:400,message:"Bad request!",error:d.getMessages()})]:(g={},e.body.category_uid?[4,(new c.default).getByFilter({filter:{created_by_user_id:o.id,uid:e.body.category_uid}})]:[3,4]);case 3:b=a.sent(),console.log(b),m=b[0],g=r(r({},g),{blog_category_id:m.id}),a.label=4;case 4:return[4,(v=new f.default).store(r({title:e.body.title,content:e.body.content,created_by_user_id:o.id,uid:s},g))];case 5:return a.sent(),[4,v.getByFilter({filter:{uid:s}})];case 6:return w=a.sent()[0],j=new p.default,e.body.tag_uid&&e.body.tag_uid.length>0?[4,(new y.default).getByFilter({filter:{created_by_user_id:o.id,uid:{in:e.body.tag_uid}}})]:[3,8];case 7:a.sent().forEach(function(e){j.store({blog_content_id:w.id,blog_tag_id:e.id})}),a.label=8;case 8:return[2,t.status(200).json({statusCode:200,message:"Success!",result:w})];case 9:return T=a.sent(),console.log(T),[2,t.status(500).json({statusCode:500,message:T})];case 10:return[2]}})})},updateContent:function(e,t){return o(void 0,void 0,void 0,function(){var n,o,s,i,d,h,g,b,m,v,w;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,9,,10]),n=e.cookies.token,[4,(0,l.promisify)(_.default.verify)(n,null!==(w=process.env.SECRET_KEY)&&void 0!==w?w:"")];case 1:return o=a.sent(),s={title:{label:"Title",rule:{required:!0}},content:{label:"Content",rule:{required:!0}}},[4,u.default.make(e.body,s)];case 2:return(i=a.sent()).fails()?[2,t.status(400).json({statusCode:400,message:"Bad request!",error:i.getMessages()})]:(d={blog_category_id:null},e.body.category_uid?[4,(new c.default).getByFilter({filter:{created_by_user_id:o.id,uid:e.body.category_uid}})]:[3,4]);case 3:h=a.sent()[0],d=r(r({},d),{blog_category_id:h.id}),a.label=4;case 4:return[4,(g=new f.default).update(r({title:e.body.title,content:e.body.content},d),{filter:{created_by_user_id:o.id,uid:e.params.uid}})];case 5:return a.sent(),[4,g.getByFilter({filter:{uid:e.params.uid}})];case 6:return b=a.sent()[0],(m=new p.default).delete({blog_content_id:b.id}),e.body.tag_uid&&e.body.tag_uid.length>0?[4,(new y.default).getByFilter({filter:{created_by_user_id:o.id,uid:{in:e.body.tag_uid}}})]:[3,8];case 7:a.sent().forEach(function(e){m.store({blog_content_id:b.id,blog_tag_id:e.id})}),a.label=8;case 8:return[2,t.status(200).json({statusCode:200,message:"Success!",result:b})];case 9:return v=a.sent(),[2,t.status(500).json({statusCode:500,message:v})];case 10:return[2]}})})},deleteContent:function(e,t){return o(void 0,void 0,void 0,function(){var n,r,o,s;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),n=e.cookies.token,[4,(0,l.promisify)(_.default.verify)(n,null!==(s=process.env.SECRET_KEY)&&void 0!==s?s:"")];case 1:return r=a.sent(),[4,(new f.default).update({deleted_at:(new Date).toISOString().replace("T"," ").replace("Z","").slice(0,19)},{filter:{uid:e.params.uid,created_by_user_id:r.id}})];case 2:return a.sent(),[2,t.status(200).json({statusCode:200,message:"Success!"})];case 3:return o=a.sent(),[2,t.status(500).json({statusCode:500,message:o})];case 4:return[2]}})})},listCategory:function(e,t){return o(void 0,void 0,void 0,function(){var n,o,i,u,d,f,p,y,h,g,b;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),n=e.cookies.token,[4,(0,l.promisify)(_.default.verify)(n,null!==(b=process.env.SECRET_KEY)&&void 0!==b?b:"")];case 1:return o=a.sent(),i={},u={},d=[],(f=(0,l.convertToObj)(e.query)).page&&(u=r(r({},u),{page:f.page})),f.sort&&(u=r(r({},u),{sort:f.sort})),f.filter&&(i=r(r({},i),f.filter)),f.show&&(d=s(s([],d,!0),f.show,!0)),[4,(p=new c.default).getByFilter({filter:r({created_by_user_id:o.id,deleted_at:"null"},i),pagination:u,join:[{name:"created_by",show:["name"]}],show:d})];case 2:return y=a.sent(),[4,p.countByFilter({filter:r({created_by_user_id:o.id,deleted_at:"null"},i)})];case 3:return h=a.sent(),[2,t.status(200).json({statusCode:200,message:"Success!",result:{data:y,total:h}})];case 4:return g=a.sent(),console.log(g),[2,t.status(500).json({statusCode:500,message:g.message})];case 5:return[2]}})})},createCategory:function(e,t){return o(void 0,void 0,void 0,function(){var n,r,o,s,i,d,f,p,y;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,5,,6]),n=e.cookies.token,[4,(0,l.promisify)(_.default.verify)(n,null!==(y=process.env.SECRET_KEY)&&void 0!==y?y:"")];case 1:return r=a.sent(),o=(0,h.v4)(),s={name:{label:"Name",rule:{required:!0}}},[4,u.default.make(e.body,s)];case 2:return(i=a.sent()).fails()?[2,t.status(400).json({statusCode:400,message:"Bad request!",error:i.getMessages()})]:[4,(d=new c.default).store({name:e.body.name,created_by_user_id:r.id,uid:o})];case 3:return a.sent(),[4,d.getByFilter({filter:{uid:o}})];case 4:return f=a.sent()[0],[2,t.status(200).json({statusCode:200,message:"Success!",result:f})];case 5:return p=a.sent(),[2,t.status(500).json({statusCode:500,message:p})];case 6:return[2]}})})},updateCategory:function(e,t){return o(void 0,void 0,void 0,function(){var n,r,o,s,i,d,f,p;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,5,,6]),n=e.cookies.token,[4,(0,l.promisify)(_.default.verify)(n,null!==(p=process.env.SECRET_KEY)&&void 0!==p?p:"")];case 1:return r=a.sent(),o={name:{label:"Name",rule:{required:!0}}},[4,u.default.make(e.body,o)];case 2:return(s=a.sent()).fails()?[2,t.status(400).json({statusCode:400,message:"Bad request!",error:s.getMessages()})]:[4,(i=new c.default).update({name:e.body.name},{filter:{created_by_user_id:r.id,uid:e.params.uid}})];case 3:return a.sent(),[4,i.getByFilter({filter:{uid:e.params.uid}})];case 4:return d=a.sent()[0],[2,t.status(200).json({statusCode:200,message:"Success!",result:d})];case 5:return f=a.sent(),[2,t.status(500).json({statusCode:500,message:f})];case 6:return[2]}})})},deleteCategory:function(e,t){return o(void 0,void 0,void 0,function(){var n,r,o,s;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),n=e.cookies.token,[4,(0,l.promisify)(_.default.verify)(n,null!==(s=process.env.SECRET_KEY)&&void 0!==s?s:"")];case 1:return r=a.sent(),[4,(new c.default).update({deleted_at:(new Date).toISOString().replace("T"," ").replace("Z","").slice(0,19)},{filter:{uid:e.params.uid,created_by_user_id:r.id}})];case 2:return a.sent(),[2,t.status(200).json({statusCode:200,message:"Success!"})];case 3:return o=a.sent(),[2,t.status(500).json({statusCode:500,message:o})];case 4:return[2]}})})},listTag:function(e,t){return o(void 0,void 0,void 0,function(){var n,o,i,u,c,d,f,p,h,g,b;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),n=e.cookies.token,[4,(0,l.promisify)(_.default.verify)(n,null!==(b=process.env.SECRET_KEY)&&void 0!==b?b:"")];case 1:return o=a.sent(),i={},u={},c=[],(d=(0,l.convertToObj)(e.query)).page&&(u=r(r({},u),{page:d.page})),d.sort&&(u=r(r({},u),{sort:d.sort})),d.filter&&(i=r(r({},i),d.filter)),d.show&&(c=s(s([],c,!0),d.show,!0)),[4,(f=new y.default).getByFilter({filter:r({created_by_user_id:o.id,deleted_at:"null"},i),pagination:u,join:[{name:"created_by",show:["name"]}],show:c})];case 2:return p=a.sent(),[4,f.countByFilter({filter:r({created_by_user_id:o.id,deleted_at:"null"},i)})];case 3:return h=a.sent(),[2,t.status(200).json({statusCode:200,message:"Success!",result:{data:p,total:h}})];case 4:return g=a.sent(),[2,t.status(500).json({statusCode:500,message:g.message})];case 5:return[2]}})})},createTag:function(e,t){return o(void 0,void 0,void 0,function(){var n,r,o,s,i,c,d,f,p;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,5,,6]),n=e.cookies.token,[4,(0,l.promisify)(_.default.verify)(n,null!==(p=process.env.SECRET_KEY)&&void 0!==p?p:"")];case 1:return r=a.sent(),o=(0,h.v4)(),s={name:{label:"Name",rule:{required:!0}}},[4,u.default.make(e.body,s)];case 2:return(i=a.sent()).fails()?[2,t.status(400).json({statusCode:400,message:"Bad request!",error:i.getMessages()})]:[4,(c=new y.default).store({name:e.body.name,created_by_user_id:r.id,uid:o})];case 3:return a.sent(),[4,c.getByFilter({filter:{uid:o}})];case 4:return d=a.sent()[0],[2,t.status(200).json({statusCode:200,message:"Success!",result:d})];case 5:return f=a.sent(),[2,t.status(500).json({statusCode:500,message:f})];case 6:return[2]}})})},updateTag:function(e,t){return o(void 0,void 0,void 0,function(){var n,r,o,s,i,c,d,f;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,5,,6]),n=e.cookies.token,[4,(0,l.promisify)(_.default.verify)(n,null!==(f=process.env.SECRET_KEY)&&void 0!==f?f:"")];case 1:return r=a.sent(),o={name:{label:"Name",rule:{required:!0}}},[4,u.default.make(e.body,o)];case 2:return(s=a.sent()).fails()?[2,t.status(400).json({statusCode:400,message:"Bad request!",error:s.getMessages()})]:[4,(i=new y.default).update({name:e.body.name},{filter:{created_by_user_id:r.id,uid:e.params.uid}})];case 3:return a.sent(),[4,i.getByFilter({filter:{uid:e.params.uid}})];case 4:return c=a.sent()[0],[2,t.status(200).json({statusCode:200,message:"Success!",result:c})];case 5:return d=a.sent(),[2,t.status(500).json({statusCode:500,message:d})];case 6:return[2]}})})},deleteTag:function(e,t){return o(void 0,void 0,void 0,function(){var n,r,o,s;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),n=e.cookies.token,[4,(0,l.promisify)(_.default.verify)(n,null!==(s=process.env.SECRET_KEY)&&void 0!==s?s:"")];case 1:return r=a.sent(),[4,(new y.default).update({deleted_at:(new Date).toISOString().replace("T"," ").replace("Z","").slice(0,19)},{filter:{uid:e.params.uid,created_by_user_id:r.id}})];case 2:return a.sent(),[2,t.status(200).json({statusCode:200,message:"Success!"})];case 3:return o=a.sent(),[2,t.status(500).json({statusCode:500,message:o})];case 4:return[2]}})})}};t.default=g},449:e=>{e.exports=require("pg")},486:e=>{e.exports=require("bcrypt")},495:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,i)}l((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(193),l=s(n(829)),u={any:function(e,t){return o(void 0,void 0,void 0,function(){var n,o,s;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),n=e.cookies.token,[4,(0,i.promisify)(l.default.verify)(n,null!==(s=process.env.SECRET_KEY)&&void 0!==s?s:"")];case 1:return delete(o=a.sent()).id,t.status(200).send((0,i.renderHtml)({reducer:r({},o?{auth:{userData:o}}:{})})),[3,3];case 2:return a.sent(),t.status(200).send((0,i.renderHtml)()),[3,3];case 3:return[2]}})})}};t.default=u},510:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.database="webivert_app",t.dialect="pgsql",t.table="blog_contents",t.relations={category:{type:"belongsTo",relatedTo:{database:"webivert_app",dialect:"pgsql",table:"blog_categories",foreignKey:"blog_category_id",localKey:"id",columns:[["name"],["uid"]]}},content_tag:{type:"hasMany",relatedTo:{database:"webivert_app",dialect:"pgsql",table:"blog_content_tags",foreignKey:"blog_content_id",localKey:"id",relations:{tag:{type:"belongsTo",relatedTo:{database:"webivert_app",dialect:"pgsql",table:"blog_tags",foreignKey:"blog_tag_id",localKey:"id",columns:[["name"],["uid"]]}}}}},created_by:{type:"belongsTo",relatedTo:{database:"webivert_app",dialect:"pgsql",table:"users",foreignKey:"created_by_user_id",localKey:"id"}}},t}return o(t,e),t}(a(n(88)).default);t.default=s},535:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.database="webivert_app",t.dialect="pgsql",t.table="blog_categories",t.relations={created_by:{type:"belongsTo",relatedTo:{database:"webivert_app",dialect:"pgsql",table:"users",foreignKey:"created_by_user_id",localKey:"id"}},content:{type:"hasMany",relatedTo:{database:"webivert_app",dialect:"pgsql",table:"blog_contents",foreignKey:"blog_category_id",localKey:"id"}}},t}return o(t,e),t}(a(n(88)).default);t.default=s},605:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(449);r(n(818)).default.config();var a={webivert_app:new o.Pool({connectionString:process.env.DATABASE_URL,ssl:{rejectUnauthorized:!1}})};t.default=a},628:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(298)),a=r(n(388)),s=r(n(495)),i=[{path:"/api",children:[{path:"/login",method:"post",controller:o.default.login},{path:"/logout",method:"post",controller:o.default.logout},{path:"/dashboard",children:[{path:"/blog",children:[{path:"/content",children:[{path:"/",method:"get",controller:a.default.listContent},{path:"/create",method:"post",controller:a.default.createContent},{path:"/update/:uid",method:"put",controller:a.default.updateContent},{path:"/delete/:uid",method:"delete",controller:a.default.deleteContent}]},{path:"/category",children:[{path:"/",method:"get",controller:a.default.listCategory},{path:"/create",method:"post",controller:a.default.createCategory},{path:"/update/:uid",method:"put",controller:a.default.updateCategory},{path:"/delete/:uid",method:"delete",controller:a.default.deleteCategory}]},{path:"/tag",children:[{path:"/",method:"get",controller:a.default.listTag},{path:"/create",method:"post",controller:a.default.createTag},{path:"/update/:uid",method:"put",controller:a.default.updateTag},{path:"/delete/:uid",method:"delete",controller:a.default.deleteTag}]},{path:"/comment",children:[{path:"/",method:"get",controller:a.default.listComment},{path:"/delete/:uid",method:"delete",controller:a.default.deleteComment}]}]}]},{path:"/blog",children:[{path:"/content",method:"get",controller:a.default.listContentPublic},{path:"/category",method:"get",controller:a.default.listCategoryPublic},{path:"/comment",method:"get",controller:a.default.listCommentPublic},{path:"/comment/store",method:"post",controller:a.default.storeCommentPublic}]},{path:"/{*any}",method:"all",controller:function(e,t){t.status(404).json({statusCode:400,message:"API endpoint not found"})}}]},{path:"/{*any}",method:"get",controller:s.default.any}];t.default=i},674:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.database="webivert_app",t.dialect="pgsql",t.table="blog_comments",t.relations={comment:{type:"belongsTo",relatedTo:{database:"webivert_app",dialect:"pgsql",table:"blog_comments",foreignKey:"blog_comment_id",localKey:"id"}},content:{type:"belongsTo",relatedTo:{database:"webivert_app",dialect:"pgsql",table:"blog_contents",foreignKey:"blog_content_id",localKey:"id",columns:[["title"],["uid"]],relations:{author:{type:"belongsTo",relatedTo:{database:"webivert_app",dialect:"pgsql",table:"users",foreignKey:"created_by_user_id",localKey:"id",columns:[["name"]]}}}}},created_by:{type:"belongsTo",relatedTo:{database:"webivert_app",dialect:"pgsql",table:"users",foreignKey:"created_by_user_id",localKey:"id"}}},t}return o(t,e),t}(a(n(88)).default);t.default=s},711:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(252)),a=r(n(898)),s=r(n(628)),i=n(193);r(n(818)).default.config();var l=(0,o.default)();l.use(o.default.static("public")),l.use(o.default.json()),l.use((0,a.default)()),l.use("/bulma",o.default.static("node_modules/bulma/css")),l.use("/fa",o.default.static("node_modules/@fortawesome/fontawesome-free")),l.use("/api",function(e,t,n){var r="[32m[".concat(e.method,"][0m"),o=Object.entries(e.query).map(function(e){var t,n=e[0],r=e[1];return Array.isArray(r)?r.map(function(e){return"".concat(n,"=").concat(encodeURIComponent(e.toString()))}).join("&"):"".concat(n,"=").concat(encodeURIComponent(null!==(t=null==r?void 0:r.toString())&&void 0!==t?t:""))}).join("&"),a=(new Date).toISOString();console.log("[".concat(a,"]").concat(r," ").concat(e.path).concat(o?"?"+o:"")),console.log(""),n()}),(0,i.expandRouter)(s.default).forEach(function(e){return e.controller&&e.method?l[e.method](e.path,e.middleware?e.middleware:[],e.controller):null}),e.exports=l},799:function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.database="webivert_app",t.dialect="pgsql",t.table="blog_tags",t.relations={created_by:{type:"belongsTo",relatedTo:{database:"webivert_app",dialect:"pgsql",table:"users",foreignKey:"created_by_user_id",localKey:"id"}}},t}return o(t,e),t}(a(n(88)).default);t.default=s},818:e=>{e.exports=require("dotenv")},829:e=>{e.exports=require("jsonwebtoken")},898:e=>{e.exports=require("cookie-parser")},903:e=>{e.exports=require("uuid")}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}var __webpack_exports__=__webpack_require__(711);module.exports=__webpack_exports__})();